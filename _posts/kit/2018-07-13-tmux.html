---
layout: post
title: "Tmux 学习"
date: 2015-07-13
categories: 终端工具
tags:
    - 终端工具
    - Tmux
---

<div id="outline-container-orgee52083" class="outline-2">
<h2 id="orgee52083"><span class="section-number-2">1</span> Tmux 常用命令</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org7ca97cb" class="outline-3">
<h3 id="org7ca97cb"><span class="section-number-3">1.1</span> Session 命令</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">
<pre class="src src-sh">tmux                      <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21019;&#24314;&#26032;&#30340; session</span>
tmux new -S name          <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21019;&#24314;&#26032;&#30340; session &#24182;&#25351;&#23450;&#19968;&#20010; name</span>
tmux ls                   <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#22810;&#23569;&#20010;&#21518;&#21488;&#24037;&#20316;&#30340; session</span>
tmux a/at/attach          <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37325;&#26032;&#36830;&#25509; session</span>
tmux a/at/attach -t num   <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#26377;&#22810;&#20010; session, &#25351;&#23450; session num &#36830;&#25509;</span>
tmux kill-ses -t myses    <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">kill &#26576;&#20010; session</span>
tmux kill-ses -a          <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">kill &#25152;&#26377; session, &#38500;&#20102;&#24403;&#21069;&#30340; session</span>
tmux kill-ses -a -t myses <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">kill &#25152;&#26377; session, &#38500;&#20102; myses</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga32b80a" class="outline-3">
<h3 id="orga32b80a"><span class="section-number-3">1.2</span> 操作方式</h3>
<div class="outline-text-3" id="text-1-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;prefix&gt; + key</code></td>
<td class="org-left"><code>&lt;prefix&gt;</code> 默认为 ctrl + b</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + c</code></td>
<td class="org-left">表示先按 ctrl + b 再按 c 键</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org5a717cd" class="outline-3">
<h3 id="org5a717cd"><span class="section-number-3">1.3</span> 帮助信息</h3>
<div class="outline-text-3" id="text-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;prefix&gt; + ?</code></td>
<td class="org-left">查看所有的 key map</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org75dbe53" class="outline-3">
<h3 id="org75dbe53"><span class="section-number-3">1.4</span> Session</h3>
<div class="outline-text-3" id="text-1-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;prefix&gt; + d</code></td>
<td class="org-left">detach 整个 session, 后续可以重新连接</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + s</code></td>
<td class="org-left">列出 session</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + $</code></td>
<td class="org-left">重命名 session</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + (</code></td>
<td class="org-left">跳到上一个 seesion</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + )</code></td>
<td class="org-left">跳到下一个 seesion</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org8ddcd92" class="outline-3">
<h3 id="org8ddcd92"><span class="section-number-3">1.5</span> Window 操作</h3>
<div class="outline-text-3" id="text-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;prefix&gt; + c</code></td>
<td class="org-left">新建一个 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + n</code></td>
<td class="org-left">下一个 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + p</code></td>
<td class="org-left">上一个 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + w</code></td>
<td class="org-left">列出 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + &amp;</code></td>
<td class="org-left">关闭当前 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + [1-9]</code></td>
<td class="org-left">选定特定 num 的 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + f</code></td>
<td class="org-left">查找 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + ,</code></td>
<td class="org-left">重命名 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + .</code></td>
<td class="org-left">移动 window</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgb884402" class="outline-3">
<h3 id="orgb884402"><span class="section-number-3">1.6</span> Pane 操作</h3>
<div class="outline-text-3" id="text-1-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;prefix&gt; + %</code></td>
<td class="org-left">纵向分裂</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + "</code></td>
<td class="org-left">横向分裂</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + 方向键</code></td>
<td class="org-left">在一个 window 中切换 pane</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + ctrl-方向键</code></td>
<td class="org-left">调整 pane 大小</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + z</code></td>
<td class="org-left">全屏化当前 pane, 再次执行退出全屏</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + x</code></td>
<td class="org-left">关闭当前 pane</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + q</code></td>
<td class="org-left">显示 pane 编号</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + o</code></td>
<td class="org-left">跳到下一个 pane</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + {</code></td>
<td class="org-left">跟前一个编号的 pane 交换</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + }</code></td>
<td class="org-left">跟后一个编号的 pane 交换</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + ;</code></td>
<td class="org-left">跳转到上一个活跃的 pane</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + !</code></td>
<td class="org-left">将 pane 转化为 window</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + &lt;Space&gt;</code></td>
<td class="org-left">改变 pane 的布局</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org38e0b21" class="outline-3">
<h3 id="org38e0b21"><span class="section-number-3">1.7</span> Misc</h3>
<div class="outline-text-3" id="text-1-7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;prefix&gt; + t</code></td>
<td class="org-left">显示时钟</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + :</code></td>
<td class="org-left">命令行</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org4939266" class="outline-3">
<h3 id="org4939266"><span class="section-number-3">1.8</span> Pane 同步</h3>
<div class="outline-text-3" id="text-1-8">
<div class="org-src-container">
<pre class="src src-sh">:setw synchronize-panes  <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25171;&#24320;(&#20851;&#38381;) pane &#21516;&#27493;&#27169;&#24335;, &#21457;&#36865;&#21629;&#20196;&#21040;&#25152;&#26377;&#30340; pane &#20013;</span>
                         <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21482;&#24433;&#21709;&#24403;&#21069; window &#30340; pane</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9dedfeb" class="outline-3">
<h3 id="org9dedfeb"><span class="section-number-3">1.9</span> 复制模式</h3>
<div class="outline-text-3" id="text-1-9">
<p>
添加下面一行到 $HOME/.tmux.conf, 通过 vim 的快捷键实现浏览, 复制等操作;
</p>

<div class="org-src-container">
<pre class="src src-sh">setw -g mode-keys vi
</pre>
</div>

<p>
更多 vim 快捷键可参考 ../editors/vim.txt, 以下列出一些常用快捷键.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&lt;prefix&gt; + [</code></td>
<td class="org-left">进入 copy mode</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; + ]</code></td>
<td class="org-left">粘贴选择内容(粘贴 buffer_0 的内容)</td>
</tr>

<tr>
<td class="org-left">:show-buffer</td>
<td class="org-left">显示 buffer_0 的内容</td>
</tr>

<tr>
<td class="org-left">:capture-buffer</td>
<td class="org-left">复制整个能见的内容到当前的 buffer</td>
</tr>

<tr>
<td class="org-left">:list-buffers</td>
<td class="org-left">列出所有的 buffer</td>
</tr>

<tr>
<td class="org-left">:choose-buffer</td>
<td class="org-left">列出所有的 buffer, 并选择用于粘贴的 buffer</td>
</tr>

<tr>
<td class="org-left">:save-buffer buf.txt</td>
<td class="org-left">将 buffer 的内容复制到 buf.txt</td>
</tr>

<tr>
<td class="org-left">:delete-buffer -b 1</td>
<td class="org-left">删除 buffer_1</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">vi</th>
<th scope="col" class="org-left">emacs</th>
<th scope="col" class="org-left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">^</td>
<td class="org-left">M-m</td>
<td class="org-left">跳转到一行开头</td>
</tr>

<tr>
<td class="org-left">Escape</td>
<td class="org-left">C-g</td>
<td class="org-left">放弃选择</td>
</tr>

<tr>
<td class="org-left">k</td>
<td class="org-left">Up</td>
<td class="org-left">上移</td>
</tr>

<tr>
<td class="org-left">j</td>
<td class="org-left">Down</td>
<td class="org-left">下移</td>
</tr>

<tr>
<td class="org-left">h</td>
<td class="org-left">Left</td>
<td class="org-left">左移</td>
</tr>

<tr>
<td class="org-left">l</td>
<td class="org-left">Right</td>
<td class="org-left">右移</td>
</tr>

<tr>
<td class="org-left">L</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">最后一行</td>
</tr>

<tr>
<td class="org-left">M</td>
<td class="org-left">M-r</td>
<td class="org-left">中间一行</td>
</tr>

<tr>
<td class="org-left">H</td>
<td class="org-left">M-R</td>
<td class="org-left">第一行</td>
</tr>

<tr>
<td class="org-left">$</td>
<td class="org-left">C-e</td>
<td class="org-left">跳转到行尾</td>
</tr>

<tr>
<td class="org-left">:</td>
<td class="org-left">g</td>
<td class="org-left">跳转至某一行</td>
</tr>

<tr>
<td class="org-left">C-d</td>
<td class="org-left">M-Down</td>
<td class="org-left">下翻半页</td>
</tr>

<tr>
<td class="org-left">C-u</td>
<td class="org-left">M-Up</td>
<td class="org-left">上翻半页</td>
</tr>

<tr>
<td class="org-left">C-f</td>
<td class="org-left">Page down</td>
<td class="org-left">下翻一页</td>
</tr>

<tr>
<td class="org-left">C-b</td>
<td class="org-left">Page up</td>
<td class="org-left">上翻一页</td>
</tr>

<tr>
<td class="org-left">w</td>
<td class="org-left">M-f</td>
<td class="org-left">下一个字符</td>
</tr>

<tr>
<td class="org-left">b</td>
<td class="org-left">M-b</td>
<td class="org-left">前一个字符</td>
</tr>

<tr>
<td class="org-left">q</td>
<td class="org-left">Escape</td>
<td class="org-left">退出</td>
</tr>

<tr>
<td class="org-left">?</td>
<td class="org-left">C-r</td>
<td class="org-left">往上查找</td>
</tr>

<tr>
<td class="org-left">n</td>
<td class="org-left">n</td>
<td class="org-left">查找下一个</td>
</tr>

<tr>
<td class="org-left">Space</td>
<td class="org-left">C-Space</td>
<td class="org-left">进入选择模式</td>
</tr>

<tr>
<td class="org-left">Enter</td>
<td class="org-left">M-w</td>
<td class="org-left">确认选择内容, 并退出</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org9c54eec" class="outline-3">
<h3 id="org9c54eec"><span class="section-number-3">1.10</span> mouse mode</h3>
<div class="outline-text-3" id="text-1-10">
<div class="org-src-container">
<pre class="src src-sh">:setw -g mode-mouse on           <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25171;&#24320;&#40736;&#26631;&#27169;&#24335;</span>
:set -g mouse-select-pane on     <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36890;&#36807;&#40736;&#26631;&#36873;&#25321; pane</span>
:set -g mouse-resize-pane on     <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36890;&#36807;&#40736;&#26631;&#26356;&#25913; pane &#22823;&#23567;</span>
:set -g mouse-select-window on   <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36890;&#36807;&#40736;&#26631;&#36873;&#25321; window</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2ce9da5" class="outline-2">
<h2 id="org2ce9da5"><span class="section-number-2">2</span> gpakosz 的 .tmux 配置</h2>
<div class="outline-text-2" id="text-2">
<p>
自包含，漂亮和多功能的 .tmux.conf 配置文件。
</p>
</div>

<div id="outline-container-orge248e30" class="outline-3">
<h3 id="orge248e30"><span class="section-number-3">2.1</span> 安装</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #4f97d7;">cd</span>
git clone https://github.com/gpakosz/.tmux.git
ln -s -f .tmux/.tmux.conf
cp .tmux/.tmux.conf.local .
</pre>
</div>

<p>
然后继续定制您的 ~/.tmux.conf.local 副本。
如果您是 Vim 用户，则将 $EDITOR 环境变量设置为 vim 启用并进一步自定义 vi 风格的键绑定（请参阅 tmux 手册）。
</p>
</div>

<div id="outline-container-org3366f8f" class="outline-4">
<h4 id="org3366f8f"><span class="section-number-4">2.1.1</span> 我安装了 Powerline 和/或（修补）字体，但无法看到 Powerline 符号。</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
首先，你不需要安装 Powerline。 您只需要使用 Powerline 符号或独立字体修补的 PowerlineSymbols.otf 字体。然后确保您的 ~/.tmux.conf.local 副本使用正确的代码点作为  tmux_conf_theme_left_separator_XXX 值。
</p>
</div>
</div>

<div id="outline-container-orga5ba861" class="outline-4">
<h4 id="orga5ba861"><span class="section-number-4">2.1.2</span> 我在 Windows 上使用 Bash（WSL），颜色和电力线的外观都坏了。</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
新控制台中的 Bash On Windows 驱动程序目前存在一个错误，它会阻止文本属性（粗体，下划线等）与颜色正确结合。解决方法是使用搜索您的 ~/.tmux.conf.local 副本并替换属性 'none'。
此外，除非 Window 的控制台用 DirectWrite 替换其基于 GDI 的渲染，否则 Powerline 符号将被打破。
另一种方法是使用 Mintty 终端进行 WSL。
</p>
</div>
</div>
</div>

<div id="outline-container-orgccbad5a" class="outline-3">
<h3 id="orgccbad5a"><span class="section-number-3">2.2</span> 特点</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>C-a 作为次要前缀，同时保留默认 C-b 前缀</li>
<li>由电力线启发的视觉主题</li>
<li>最大化任何窗格到新窗口 ~&lt;prefix&gt; +~</li>
<li>可识别 SSH 的用户名和主机名状态行信息</li>
<li>鼠标模式切换 ~&lt;prefix&gt; m~</li>
<li>自动使用（reattach-to-user-namespace  如果可用）</li>
<li>笔记本电脑电池状态信息</li>
<li>正常运行时间状态行信息</li>
<li>聚焦窗格（tmux &gt;= 2.1）的可选突出显示</li>
<li>可配置的新窗口和窗格行为（可选保留当前路径）</li>
<li>支持 SSH 的拆分窗格（重新连接到远程服务器，实验）</li>
<li>复制到操作系统剪贴板（需要 reattach-to-user-namespace  在 macOS 上 ，xsel 或 xclip 在 Linux 上）</li>
<li>如果可用 ，Facebook PathPicker 集成</li>
<li>Urlview 集成（如果可用）</li>
</ul>

<p>
最大化任何窗格到新窗口的 <code>&lt;prefix&gt; +</code> 功能与内建不同 ，resize-pane -Z 因为它允许您进一步拆分最大化的窗格。通过允许您将窗格最大化到新窗口，然后更改窗口，然后返回并且窗格在其自己的窗口中仍处于最大化状态，它也更加灵活。然后，您可以通过使用 ~&lt;prefix&gt; +~ 源窗口或最大化窗口来最小化窗格。
</p>

<p>
鼠标模式允许您设置活动窗口，设置活动窗格，调整窗格大小并自动切换到复制模式以选择文本。
</p>
</div>
</div>

<div id="outline-container-orgf2d46fc" class="outline-3">
<h3 id="orgf2d46fc"><span class="section-number-3">2.3</span> 按键绑定</h3>
<div class="outline-text-3" id="text-2-3">
</div>
<div id="outline-container-org6616b09" class="outline-4">
<h4 id="org6616b09"><span class="section-number-4">2.3.1</span> 前缀绑定</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
通过使用前缀密钥和后跟命令密钥的组合键，可以从连接的客户端控制 tmux。 此配置使用 C-a 作为辅助前缀，同时保留 C-b 为默认前缀。在以下关键绑定列表中：
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">按键</td>
<td class="org-left">说明</td>
</tr>

<tr>
<td class="org-left">--------------</td>
<td class="org-left">---</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt;</code></td>
<td class="org-left">意味着你必须打 Ctrl+a 或 Ctrl+b</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; c</code></td>
<td class="org-left">意味着你必须按 Ctrl+a 或 Ctrl+b 后跟 c</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; C-c</code></td>
<td class="org-left">意味着你必须按 Ctrl+a 或 Ctrl+b 然后按 Ctrl+c</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org4873939" class="outline-4">
<h4 id="org4873939"><span class="section-number-4">2.3.2</span> 功能绑定</h4>
<div class="outline-text-4" id="text-2-3-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Session</td>
<td class="org-left">说明</td>
</tr>

<tr>
<td class="org-left">--------------------</td>
<td class="org-left">---</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; C-c</code></td>
<td class="org-left">创建一个新的会话</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; C-f</code></td>
<td class="org-left">让您按名称切换到另一个会话</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Window</td>
<td class="org-left">说明</td>
</tr>

<tr>
<td class="org-left">--------------------</td>
<td class="org-left">---</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; C-[h,l]</code></td>
<td class="org-left">让你浏览窗口（默认 ~&lt;prefix&gt; [n,p]~ 解除绑定）</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; Tab</code></td>
<td class="org-left">带你到最后一个活动窗口</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Pane</td>
<td class="org-left">说明</td>
</tr>

<tr>
<td class="org-left">--------------------</td>
<td class="org-left">---</td>
</tr>

<tr>
<td class="org-left">~&lt;prefix&gt; -~ </td>
<td class="org-left">垂直分割当前窗格</td>
</tr>

<tr>
<td class="org-left">~&lt;prefix&gt; _~ </td>
<td class="org-left">水平分割当前窗格</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; +</code></td>
<td class="org-left">将当前窗格最大化为新窗口</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; [h,j,k,l]</code></td>
<td class="org-left">让您导航窗格</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; [H,J,K,L]</code></td>
<td class="org-left">让你调整窗格</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; [&lt;,&gt;]</code></td>
<td class="org-left">让你交换窗格</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Misc</td>
<td class="org-left">说明</td>
</tr>

<tr>
<td class="org-left">--------------------</td>
<td class="org-left">---</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; e file</code></td>
<td class="org-left">用 $EDITOR 环境变量定义的编辑器 打开（缺省为 vim）</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; r</code>  </td>
<td class="org-left">重新加载配置</td>
</tr>

<tr>
<td class="org-left"><code>C-l</code>  </td>
<td class="org-left">清除屏幕和 tmux 历史记录</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; m</code></td>
<td class="org-left">打开或关闭鼠标模式</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; U</code></td>
<td class="org-left">启动 Urlview（如果可用）</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; F</code></td>
<td class="org-left">启动 Facebook PathPicker（如果可用）</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">复制粘贴</td>
<td class="org-left">说明</td>
</tr>

<tr>
<td class="org-left">--------------------</td>
<td class="org-left">---</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; Enter</code></td>
<td class="org-left">进入复制模式</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; b</code>   </td>
<td class="org-left">列出了粘贴缓冲区</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; p</code>   </td>
<td class="org-left">来自顶部粘贴缓冲区的粘贴</td>
</tr>

<tr>
<td class="org-left"><code>&lt;prefix&gt; P</code>   </td>
<td class="org-left">让您选择要粘贴的粘贴缓冲区</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org90ef8cd" class="outline-4">
<h4 id="org90ef8cd"><span class="section-number-4">2.3.3</span> vi 模式</h4>
<div class="outline-text-4" id="text-2-3-3">
<p>
绑定为 copy-mode-vi 模式
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">按键</td>
<td class="org-left">说明</td>
</tr>

<tr>
<td class="org-left">------</td>
<td class="org-left">---</td>
</tr>

<tr>
<td class="org-left">v  </td>
<td class="org-left">开始选择/视觉模式</td>
</tr>

<tr>
<td class="org-left">C-v  </td>
<td class="org-left">在块状视觉模式和视觉模式之间切换</td>
</tr>

<tr>
<td class="org-left">H  </td>
<td class="org-left">跳转到行首</td>
</tr>

<tr>
<td class="org-left">L  </td>
<td class="org-left">跳到行尾</td>
</tr>

<tr>
<td class="org-left">y  </td>
<td class="org-left">将选择复制到顶部粘贴缓冲区</td>
</tr>

<tr>
<td class="org-left">Escape</td>
<td class="org-left">取消当前操作</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org8b1d1cd" class="outline-3">
<h3 id="org8b1d1cd"><span class="section-number-3">2.4</span> 组件设置</h3>
<div class="outline-text-3" id="text-2-4">
<p>
虽然此配置尝试带来理智的默认设置，但您可能需要根据需要进一步进行自定义。而不是修改 ~/.tmux.conf 文件并从上游发散，正确的方法是编辑 ~/.tmux.conf.local  文件。
</p>

<p>
请参考默认 ~/.tmux.conf.local 文件以了解更多关于您可以调整以改变不同行为的变量。按下 &lt;prefix&gt; e  将打开 ~/.tmux.conf.local 由 $EDITOR  环境变量定义的编辑器（默认为 vim 空时）。
</p>
</div>

<div id="outline-container-org8d86aa2" class="outline-4">
<h4 id="org8d86aa2"><span class="section-number-4">2.4.1</span> 启用 Powerline 外观</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
Powerline 起源于 Vim 的状态行插件。其流行的醒目外观是基于特殊符号的使用：
</p>

<p>
要使用这些符号，有几个选项：
</p>

<ul class="org-ul">
<li>使用已经捆绑了这些字体的字体：例如  2.030R-ro / 1.050R 版本的 Source Code Pro 字体</li>
<li>使用预先打补丁的字体</li>
<li>使用您的首选字体以及 Powerline 字体（仅包含 Powerline 符号）：这非常依赖于您的操作系统和终端仿真器</li>
<li>通过添加缺失的 Powerline 符号来修补您的首选字体：这是最困难的方法 ，Powerline 手册中没有更多文档记录</li>
</ul>

<p>
请参阅 Powerline 手册了解更多详情。
</p>

<p>
然后编辑 ~/.tmux.conf.local 文件（ &lt;prefix&gt; e）并调整以下变量：
</p>

<div class="org-src-container">
<pre class="src src-text">tmux_conf_theme_left_separator_main=' &#57520;'
tmux_conf_theme_left_separator_sub=' &#57521;'
tmux_conf_theme_right_separator_main=' &#57522;'
tmux_conf_theme_right_separator_sub=' &#57523;'
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b2f4cb" class="outline-4">
<h4 id="org7b2f4cb"><span class="section-number-4">2.4.2</span> 配置状态行</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
与此相反配置的第一个迭代，现在你对内容和顺序总量控制 status-left 和 status-right。
编辑 ~/.tmux.conf.local 文件（ &lt;prefix&gt; e）并根据您的偏好调整  tmux_conf_theme_status_left 和 tmux_conf_theme_status_right 变量。
</p>

<p>
该配置支持以下内置变量：
</p>

<ul class="org-ul">
<li>#{battery_bar} ：水平电池充电棒</li>
<li>#{battery_percentage} ： 电池百分比</li>
<li>#{battery_status} ：是电池充电还是放电？</li>
<li>#{battery_vbar} ：垂直电池充电棒</li>
<li>#{circled_session_name} ：圆圈会议号码，最多 20 个</li>
<li>#{hostname} ：可识别 SSH 的主机名信息</li>
<li>#{hostname_ssh} ：可识别 SSH 的主机名信息，未检测到 SSH 连接时为空</li>
<li>#{loadavg} ：平均负载</li>
<li>#{pairing} ：会话是否连接到多个客户端？</li>
<li>#{prefix} ：是前缀被压低？</li>
<li>#{root} ：是当前用户 root 吗？</li>
<li>#{uptime_d} ：正常运行时间</li>
<li>#{uptime_h} ：正常运行时间</li>
<li>#{uptime_m} ：正常运行时间分钟</li>
<li>#{uptime_s} ：正常运行时间秒</li>
<li>#{username} ：SSH 认识用户名信息</li>
<li>#{username_ssh} ：可识别 SSH 的用户名信息，未检测到 SSH 连接时为空</li>
</ul>
</div>
</div>

<div id="outline-container-org6533434" class="outline-4">
<h4 id="org6533434"><span class="section-number-4">2.4.3</span> 从 tmux 会话中访问 macOS 剪贴板</h4>
<div class="outline-text-4" id="text-2-4-3">
<p>
克里斯·约翰逊创造的 reattach-to-user-namespace  工具，使得 pbcopy 和 pbpasteTMUX 内再次工作。
要安装 reattach-to-user-namespace， 请使用 MacPorts 或  Homebrew：
</p>

<div class="org-src-container">
<pre class="src src-sh">port install tmux-pasteboard
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;</span>
$ brew install reattach-to-user-namespace
</pre>
</div>

<p>
一旦安装 ，reattach-to-usernamespace 将自动检测。
</p>
</div>
</div>

<div id="outline-container-orgeb08a78" class="outline-4">
<h4 id="orgeb08a78"><span class="section-number-4">2.4.4</span> 在 Mintty 中使用 Cygwin 下的配置</h4>
<div class="outline-text-4" id="text-2-4-4">
<p>
我不建议再用 Cygwin 运行这个配置。在 Cygwin 下分叉非常缓慢，这种配置 run-shell 在引擎盖下发布了很多 命令。因此，您将遇到较高的 CPU 使用率。作为替代方案，请考虑使用 Mintty 终端进行 WSL。
</p>

<p>
可以在 Mintty 内的 Cygwin 下使用这种配置，但是对于 Unicode 和 emojis 的支持缺乏 Mac 和 Linux。
特别是 ，Mintty 的文本渲染是用 GDI 来实现的，这有局限性：
</p>

<ul class="org-ul">
<li>颜色 emojis 只能通过 DirectWrite 从 Windows 8.1 开始</li>
<li>像电池放电符号指示符（U+1F50B）一样显示双倍宽度符号是越野车</li>
</ul>

<p>
要正确显示 Unicode 符号，必须使用字体链接。打开 ，regedit.exe 然后导航到注册表项 <code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\FontLink\SystemLink</code>  并为其添加一个新的条目，以便将其与 Segoe UI Symbol 字体链接。
</p>
</div>
</div>
</div>

<div id="outline-container-orgb193b04" class="outline-3">
<h3 id="orgb193b04"><span class="section-number-3">2.5</span> 保存和恢复 Tmux 会话</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Tmux 是一个强大的终端复用软件，我们可以轻易地为它列举出一堆好处。
</p>

<ul class="org-ul">
<li>支持多标签；</li>
<li>支持窗口内部进行面板的划分；</li>
<li>支持多个终端同时 attach 同一个 Tmux 会话。</li>
</ul>

<p>
如果要为 Tmux 说一个缺点，那可能就是 Tmux 会话无法在系统重启之后比较容易地恢复。这个问题在常年开机的服务器上，可能问题不明显，但是在我们自己的计算机上，或者服务器因为某些原因需要重启，那之前的 Tmux 会话就都丢失了。
为了解决这个问题，我们需要用到 Tmux 的插件系统，并安装名为 tmux-resurrect 的插件。
</p>
</div>

<div id="outline-container-org61aa28b" class="outline-4">
<h4 id="org61aa28b"><span class="section-number-4">2.5.1</span> Tmux Plugin Manager</h4>
<div class="outline-text-4" id="text-2-5-1">
<p>
和大多数支持插件的软件（系统）一样，Tmux 也有一个插件管理系统，名字就叫做 Tmux Plugin Manager。首先，我们需要安装并学习如何使用这个管理器。
</p>
</div>
</div>

<div id="outline-container-org9d3e3d4" class="outline-4">
<h4 id="org9d3e3d4"><span class="section-number-4">2.5.2</span> 下载和安装</h4>
<div class="outline-text-4" id="text-2-5-2">
<p>
Tmux Plugin Manager 的程式码托管在 GitHub 上，它的专案地址是：<a href="https://github.com/tmux-plugins/tpm">https://github.com/tmux-plugins/tpm</a>。首先，我们需要将 Tmux Plugin Manager 的程式码克隆到本地。
</p>

<div class="org-src-container">
<pre class="src src-sh">git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
</pre>
</div>

<p>
而后，我们需要在 Tmux 的配置文件底部加上这么几行：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #4f97d7;">set</span> -g @plugin <span style="color: #2d9574;">'tmux-plugins/tpm'</span>
<span style="color: #4f97d7;">set</span> -g @plugin <span style="color: #2d9574;">'tmux-plugins/tmux-sensible'</span>

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Other examples:</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">set -g @plugin 'github_username/plugin_name'</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">set -g @plugin 'git@github.com/user/plugin'</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">set -g @plugin 'git@bitbucket.com/user/plugin'</span>

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)</span>
run <span style="color: #2d9574;">'~/.tmux/plugins/tpm/tpm'</span>
</pre>
</div>

<p>
注意，最后的 <code>run '~/.tmux/plugins/tpm/tpm'</code> 一定要放在整个 ~/.tmux.conf 的最后一行。
</p>

<p>
如果你尚未启动 Tmux，那么现在就可以执行 <code>tmux new -s foobar</code> 打开一个新的窗口了。如果你已经启动了 Tmux，那么需要在 Tmux 环境里重新加载配置文件：
</p>

<div class="org-src-container">
<pre class="src src-sh">tmux source ~/.tmux.conf
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b217e8" class="outline-4">
<h4 id="org1b217e8"><span class="section-number-4">2.5.3</span> 初始化</h4>
<div class="outline-text-4" id="text-2-5-3">
<p>
注意到，在默认的配置中，我们已经添加了两个插件：tpm 和 tmux-sensible。这里 tpm 是 Tmux Plugin Manager 本身，自不必说；tmux-sensible 则是插件管理器官方推荐的必装插件——当然你可以选择不装，不过我们这里就不标新立异了。
</p>

<p>
然而，tpm 本身是已经通过 git clone 命令下载到本地了，tmux-sensible 却没有。所以，我们这里需要通过 prefix shift-i 来安装它。prefix shift-i 中，i 是 install 的缩写。执行它会根据配置文件中的插件列表，安装所有插件。
</p>

<p>
如果你的环境里命令执行正常，那么 Tmux 会提示：
</p>

<div class="org-src-container">
<pre class="src src-sh">Already installed <span style="color: #2d9574;">"tpm"</span>
Installing <span style="color: #2d9574;">"tmux-sensible"</span>
  <span style="color: #2d9574;">"tmux-sensible"</span> download success

TMUX environment reloaded.

Done, press ESCAPE to continue.
</pre>
</div>

<p>
这样，插件管理器就算是初始化成功了。
</p>
</div>
</div>

<div id="outline-container-org25f2022" class="outline-4">
<h4 id="org25f2022"><span class="section-number-4">2.5.4</span> 安装、升级和反安装插件</h4>
<div class="outline-text-4" id="text-2-5-4">
<p>
在 Tmux Plugin Manager 中安装、升级和反安装插件都很简单，他们的 Tmux 快捷键分别是：
</p>

<div class="org-src-container">
<pre class="src src-sh">prefix shift-i      <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">install</span>
prefix shift-u      <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">update</span>
prefix alt-u        <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">uninstall plugins not on the plugin list</span>
tmux-resurrect
</pre>
</div>

<p>
和 Tmux Plugin Manager 一样，tmux-resurrect 的程式码也托管在 GitHub 上，专案地址是：<a href="https://github.com/tmux-plugins/tmux-resurrect">https://github.com/tmux-plugins/tmux-resurrect</a>。
</p>
</div>
</div>

<div id="outline-container-org05ff0b4" class="outline-4">
<h4 id="org05ff0b4"><span class="section-number-4">2.5.5</span> 安装</h4>
<div class="outline-text-4" id="text-2-5-5">
<p>
有了插件管理器，安装插件就变得很简单了。
首先，我们需要修改 ~/.tmux.conf 文件，在插件列表中加上：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #4f97d7;">set</span> -g @plugin <span style="color: #2d9574;">'tmux-plugins/tmux-resurrect'</span>
</pre>
</div>

<p>
这样，在执行 prefix shift-i 的时候，Tmux Plugin Manager 就会到 GitHub 上的相应位置寻找相应专案并下载安装。
</p>
</div>
</div>

<div id="outline-container-orgaa6f9bf" class="outline-4">
<h4 id="orgaa6f9bf"><span class="section-number-4">2.5.6</span> 配置</h4>
<div class="outline-text-4" id="text-2-5-6">
<p>
同样是打开配置文件，插件配置中加上：
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">tmux-resurrect</span>
<span style="color: #4f97d7;">set</span> -g @resurrect-save-bash-history <span style="color: #2d9574;">'on'</span>
<span style="color: #4f97d7;">set</span> -g @resurrect-capture-pane-contents <span style="color: #2d9574;">'on'</span>
<span style="color: #4f97d7;">set</span> -g @resurrect-strategy-vim <span style="color: #2d9574;">'session'</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">set -g @resurrect-save 'S'</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">set -g @resurrect-restore 'R'</span>
</pre>
</div>

<p>
这样，tmux-resurrect 就会保存键入的命令历史、Tmux 的面板布局还有 Vim 的状态了。
</p>
</div>
</div>

<div id="outline-container-org6ac72b2" class="outline-4">
<h4 id="org6ac72b2"><span class="section-number-4">2.5.7</span> 保存和加载</h4>
<div class="outline-text-4" id="text-2-5-7">
<p>
至此，tmux-resurrect 已经配置好，可以保存和加载 Tmux 会话的状态了，快捷键是：
</p>

<div class="org-src-container">
<pre class="src src-sh">prefix Ctrl-s       <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">save tmux session to local file</span>
prefix Ctrl-r       <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">reload tmux session from local file</span>
</pre>
</div>

<p>
这样，只要养成定期 <code>&lt;prefix&gt; Ctrl-s</code> 的好习惯，我们就不怕 Tmux 会话状态丢失了！
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org817798b" class="outline-2">
<h2 id="org817798b"><span class="section-number-2">3</span> References</h2>
<div class="outline-text-2" id="text-3">
<p>
&gt; 本文是我的学习笔记，内容参考了网上资源，为了方便自己查询使用，做了一些修改整理。
&gt; 笔记内容摘录于下列文章，相应权利归属原作者，如有未列出的或有不妥，请联系我立即增补或删除。
</p>

<ul class="org-ul">
<li><a href="https://github.com/skywind3000/awesome-cheatsheets/blob/master/tools/tmux.txt">https://github.com/skywind3000/awesome-cheatsheets/blob/master/tools/tmux.txt</a></li>
<li><a href="https://liam0205.me/2016/09/10/tmux-plugin-resurrect/">https://liam0205.me/2016/09/10/tmux-plugin-resurrect/</a></li>
<li><a href="https://gist.github.com/MohamedAlaa/2961058">https://gist.github.com/MohamedAlaa/2961058</a></li>
<li><a href="https://tmuxcheatsheet.com/">https://tmuxcheatsheet.com/</a></li>
<li><a href="http://man.openbsd.org/OpenBSD-current/man1/tmux.1">http://man.openbsd.org/OpenBSD-current/man1/tmux.1</a></li>
<li><a href="https://github.com/gpakosz/.tmux">https://github.com/gpakosz/.tmux</a></li>
</ul>
</div>
</div>
