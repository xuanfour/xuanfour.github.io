---
layout: post
title: "CentOS 7 安装配置"
date: 2018-06-22
categories: Linux
tags:
- CentOS
excerpt:
keywords: ""
---

<blockquote>
<p>
趁着打折，买了个阿里云主机玩。记录一下整个 CentOS
的安装配置过程，避免遗忘。
</p>
</blockquote>

<div id="outline-container-org8d3eace" class="outline-2">
<h2 id="org8d3eace"><span class="section-number-2">1</span> 增加用户</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-sh">adduser xuanfour
passwd xuanfour
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb44726c" class="outline-2">
<h2 id="orgb44726c"><span class="section-number-2">2</span> 设置 sudo</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20999;&#25442;&#21040;&#36229;&#32423;&#29992;&#25143;</span>
su -
vim /etc/sudoers
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25214;&#21040; root ALL=(ALL) ALL&#65292;&#22312;&#19979;&#26041;&#25554;&#20837;&#26032;&#34892;&#65292;&#20351;&#29992; x! &#24378;&#21046;&#20445;&#23384;&#24182;&#36864;&#20986;</span>
xuanfour <span style="color: #7590db;">ALL</span>=<span style="color: #4f97d7;">(</span>ALL<span style="color: #4f97d7;">)</span> ALL
</pre>
</div>
</div>
</div>

<div id="outline-container-org99e64c5" class="outline-2">
<h2 id="org99e64c5"><span class="section-number-2">3</span> 修改主机名称</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-sh">sudo hostnamectl set-hostname newhostname
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;</span>
sudo vim /etc/hostname
sudo vim /etc/hosts
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37325;&#21551;</span>
sudo reboot
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f6527b" class="outline-2">
<h2 id="org2f6527b"><span class="section-number-2">4</span> ssh key 登录</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26412;&#22320;</span>
scp -r ~/.ssh xuanfour@wozouwokan.com:/home/xuanfour/
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#38656;&#35201;&#21516;&#26102;&#22797;&#21046; git &#37197;&#32622;&#25991;&#20214;</span>
scp ~/.gitconfig xuanfour@wozouwokan.com:/home/xuanfour/
scp ~/.gitignore_global xuanfour@wozouwokan.com:/home/xuanfour/
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36828;&#31243;</span>
cat xuanfour_mbp.pub &gt;&gt; authorized_keys
chmod <span style="color: #a45bad;">600</span> ~/.ssh/*
chmod <span style="color: #a45bad;">644</span> ~/.ssh/*.pub
chmod <span style="color: #a45bad;">700</span> ~/.ssh
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26412;&#22320;</span>
ssh xuanfour@wozouwokan.com
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c095f0" class="outline-2">
<h2 id="org7c095f0"><span class="section-number-2">5</span> 配置国内 yum 源</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36827;&#20837; /etc/yum.repos.d/ &#30446;&#24405;&#19979;&#65292;&#26032;&#24314;&#19968;&#20010; repo_bak &#30446;&#24405;&#65292;&#29992;&#20110;&#20445;&#23384;&#31995;&#32479;&#20013;&#21407;&#26469;&#30340; repo &#25991;&#20214;</span>
<span style="color: #4f97d7;">cd</span> /etc/yum.repos.d/
sudo mkdir repo_bak
sudo mv *.repo repo_bak/
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622;&#20351;&#29992;&#32593;&#26131;&#21644;&#38463;&#37324;&#30340;&#24320;&#28304;&#38236;&#20687;</span>
sudo wget http://mirrors.aliyun.com/repo/Centos-7.repo
sudo  wget http://mirrors.163.com/.help/CentOS7-Base-163.repo
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#28165;&#38500;&#31995;&#32479; yum &#32531;&#23384;&#24182;&#29983;&#25104;&#26032;&#30340;&#32531;&#23384;</span>
sudo yum clean all
sudo yum makecache
</pre>
</div>
</div>
</div>

<div id="outline-container-org38472a0" class="outline-2">
<h2 id="org38472a0"><span class="section-number-2">6</span> 配置国内 epel 源</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">
<pre class="src src-sh">yum list | grep epel-release
sudo yum install -y epel-release
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#25104;&#21151;&#65292;&#27604;&#21407;&#26469;&#22810;&#20102;&#19968;&#20010; epel.repo &#21644; epel-testing.repo &#25991;&#20214;</span>
ls
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">==&gt; Centos-7.repo  CentOS-Base-163.repo  epel.repo  epel-testing.repo  repo.bak</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20351;&#29992;&#38463;&#37324;&#24320;&#28304;&#38236;&#20687;&#25552;&#20379;&#30340; epel &#28304;</span>
sudo wget -O /etc/yum.repos.d/epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#25104;&#21151;&#65292;&#27604;&#21407;&#26469;&#22810;&#20102;&#19968;&#20010; epel-7.repo &#25991;&#20214;</span>
ls
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">==&gt; CentOS7-Base-163.repo  Centos-7.repo  epel-7.repo  epel.repo  epel-testing.repo  repo_bak</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20877;&#27425;&#28165;&#38500;&#31995;&#32479; yum &#32531;&#23384;&#65292;&#24182;&#37325;&#26032;&#29983;&#25104;&#26032;&#30340;&#32531;&#23384;</span>
sudo yum clean all
sudo yum makecache
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf3d6a41" class="outline-2">
<h2 id="orgf3d6a41"><span class="section-number-2">7</span> 更新源</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">
<pre class="src src-sh">sudo yum update -y
</pre>
</div>
</div>
</div>

<div id="outline-container-org9772e3a" class="outline-2">
<h2 id="org9772e3a"><span class="section-number-2">8</span> 安装 git</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<pre class="src src-sh">sudo yum install -y git
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5c0a64" class="outline-2">
<h2 id="orgc5c0a64"><span class="section-number-2">9</span> 下载配置文件</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36828;&#31243;</span>
mkdir -p ~/xhome/dep
<span style="color: #4f97d7;">cd</span> ~/xhome
git clone git@gitee.com:xuanfour/cfg.git
$<span style="color: #7590db;">XCFG</span>/os/linketc.sh
sudo reboot
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26412;&#22320;</span>
scp -r ~/xhome/dep/theme xuanfour@wozouwokan.com:/home/xuanfour/xhome/dep/
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36828;&#31243;</span>
ln -s ~/xhome/dep/theme/dircolors-solarized/dircolors.ansi-dark ~/.dir_colors
$<span style="color: #7590db;">XCFG</span>/devkit/git/linkgit.sh
</pre>
</div>
</div>
</div>

<div id="outline-container-org829376a" class="outline-2">
<h2 id="org829376a"><span class="section-number-2">10</span> 安装 zsh</h2>
<div class="outline-text-2" id="text-10">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; zsh</span>
sudo yum install -y zsh
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#40664;&#35748; shell</span>
chsh -s /bin/zsh
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#24403;&#21069; shell&#65306; /bin/zsh</span>
<span style="color: #4f97d7;">echo</span> $<span style="color: #7590db;">SHELL</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; oh-my-zsh:</span>
git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; autojump</span>
sudo yum install -y autojump
sudo yum install -y autojump-zsh
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#25552;&#31034;&#38169;&#35823;&#65292;&#27809;&#26377;&#37027;&#20010;&#25991;&#20214;&#25110;&#30446;&#24405;: /etc/profile.d/autojump.zsh</span>
wget https://raw.githubusercontent.com/joelthelion/autojump/master/bin/autojump.zsh -O /etc/profile.d/autojump.zsh
sed -i <span style="color: #2d9574;">'s/--add/-a/g'</span> /etc/profile.d/autojump.zsh
</pre>
</div>
</div>
</div>

<div id="outline-container-org1118c5b" class="outline-2">
<h2 id="org1118c5b"><span class="section-number-2">11</span> 初始化系统启动文件</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">
<pre class="src src-sh">$<span style="color: #7590db;">XCFG</span>/os/linketc.sh
sudo reboot
</pre>
</div>
</div>
</div>

<div id="outline-container-org2a60a92" class="outline-2">
<h2 id="org2a60a92"><span class="section-number-2">12</span> 安装 lrzsz</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">
<pre class="src src-sh">sudo yum install -y lrzsz
</pre>
</div>
</div>
</div>

<div id="outline-container-org41085c5" class="outline-2">
<h2 id="org41085c5"><span class="section-number-2">13</span> 安装 tmux</h2>
<div class="outline-text-2" id="text-13">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#20381;&#36182;&#21253;</span>
sudo yum install -y libevent-devel
sudo yum install -y ncurses-devel
sudo yum install -y glibc-static

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; tmux&#65292;&#21487;&#33021;&#29256;&#26412;&#36739;&#20302;&#65292;&#38656;&#35201;&#25163;&#24037;&#19979;&#36733;</span>
sudo yum install -y tmux
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;&#25163;&#24037;&#19979;&#36733;&#23433;&#35013; tmux</span>
mkdir -p ~/Downloads/installed/lnx
<span style="color: #4f97d7;">cd</span> ~/Downloads/installed/lnx
git clone https://github.com/tmux/tmux.git
<span style="color: #4f97d7;">cd</span> tmux
sh ./autogen.sh
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#38169;&#35823;&#25552;&#31034; aclocal failed&#65292;&#38656;&#35201;&#23433;&#35013; automake</span>
sudo yum install -y automake
./configure &amp;&amp; make
sudo make install
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#26366;&#32463;&#32534;&#35793;&#36807;&#65292;&#38656;&#35201;&#28165;&#29702;</span>
make clean

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622; tmux</span>
git clone https://github.com/gpakosz/.tmux.git ~/.tmux
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; tmux &#25554;&#20214;&#31649;&#29702;&#22120;</span>
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
$<span style="color: #7590db;">XCFG</span>/tool/tmux/linktmux.sh
tmux
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312; tmux &#37324;&#20351;&#29992;&#19979;&#21015;&#24555;&#25463;&#38190;&#23433;&#35013;&#25554;&#20214;</span>
prefix shift-i
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312; tmux &#37324;&#20351;&#29992;&#19979;&#21015;&#24555;&#25463;&#38190;&#32534;&#36753; ~/.tmux.conf.local</span>
prefix e
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312; tmux &#37324;&#20351;&#29992;&#19979;&#21015;&#24555;&#25463;&#38190;&#37325;&#36733;&#37197;&#32622;</span>
prefix r
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdb7b667" class="outline-2">
<h2 id="orgdb7b667"><span class="section-number-2">14</span> 安装 rbenv ruby rails</h2>
<div class="outline-text-2" id="text-14">
<div class="org-src-container">
<pre class="src src-sh">sudo yum update -y
sudo yum install -y git bzip2 openssl-devel readline-devel zlib-devel sqlite sqlite-devel gcc-c++
</pre>
</div>

<p>
<b>注：更详细的情况请参考
<a href="file:///mac/2017/07/26/mac/index.html#安装-rbenv-ruby-rails">Mac 安装使用</a></b>
</p>
</div>
</div>

<div id="outline-container-org93d58bf" class="outline-2">
<h2 id="org93d58bf"><span class="section-number-2">15</span> 安装 node</h2>
<div class="outline-text-2" id="text-15">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; nvm</span>
curl https://raw.githubusercontent.com/creationix/nvm/v0.32.1/install.sh | bash
&#25191;&#34892;&#37197;&#32622;
<span style="color: #4f97d7;">source</span> ~/.bashrc
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;&#37325;&#24320;&#19968;&#20010;&#32456;&#31471;</span>
nvm --version

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475; node &#29256;&#26412;&#24182;&#23433;&#35013;</span>
nvm ls-remote node
nvm install v10.5.0
node -v

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#20999;&#25442;&#21508;&#29256;&#26412; node/npm</span>
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#26368;&#26032;&#31283;&#23450;&#29256;</span>
nvm install stable
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#40664;&#35748; node &#29256;&#26412;</span>
nvm alias default <span style="color: #a45bad;">10.6.0</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20999;&#25442;&#29256;&#26412;</span>
nvm use node

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20351;&#29992; cnpm &#21644;&#28120;&#23453;&#28304;</span>
npm install -g cnpm --registry=https://registry.npm.taobao.org

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#20840;&#23616;&#29615;&#22659;&#20013;&#23433;&#35013; grunt-cli</span>
npm install -g grunt-cli
npm install -g vmd
npm install -g gitbook-cli
npm install -g hexo-cli
npm install -g tern
npm install -g js-beautify
npm install -g js-hint
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd73a030" class="outline-2">
<h2 id="orgd73a030"><span class="section-number-2">16</span> 安装 pyenv 和 python</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-org465b4cb" class="outline-3">
<h3 id="org465b4cb"><span class="section-number-3">16.1</span> 安装 pyenv</h3>
<div class="outline-text-3" id="text-16-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#20381;&#36182;</span>
sudo yum install -y gcc gcc-c++ make git patch openssl-devel zlib-devel readline-devel sqlite-devel bzip2-devel bzip2-libs
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#24320;&#21457;&#21253;&#20197;&#25903;&#25345;&#32534;&#35793;&#29615;&#22659;&#65292;&#21542;&#21017;&#20250;&#25253;&#38169; `&#27809;&#26377;&#25214;&#21040; python.h`</span>
sudo yum install -y python-devel
sudo yum install -y python36-devel
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; pyenv &#21644; virtualenv &#25554;&#20214;</span>
curl -L https://raw.github.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash
pyenv -v
pyenv help
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#28155;&#21152;&#21040; `~/.bash_profile` &#25110; `~/.zprofile` &#25991;&#20214;&#37324;</span>
<span style="color: #4f97d7;">export</span> <span style="color: #7590db;">PYENV_ROOT</span>=$<span style="color: #7590db;">HOME</span>/.pyenv
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#28155;&#21152;&#21040; `~/.bashrc` &#25110; `~/.zshrc` &#25991;&#20214;&#37324;</span>
<span style="color: #4f97d7; font-weight: bold;">if </span><span style="color: #4f97d7;">which</span> pyenv &gt;/dev/null; <span style="color: #4f97d7; font-weight: bold;">then </span><span style="color: #4f97d7;">eval</span> <span style="color: #2d9574;">"$(pyenv init -)"</span>; <span style="color: #4f97d7; font-weight: bold;">fi</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">zsh &#36816;&#34892;&#21629;&#20196;&#20351;&#37197;&#32622;&#29983;&#25928;</span>
<span style="color: #4f97d7;">source</span> ~/.zprofile &amp;&amp; <span style="color: #4f97d7;">source</span> ~/.zshrc
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">bash &#36816;&#34892;&#21629;&#20196;&#20351;&#37197;&#32622;&#29983;&#25928;</span>
<span style="color: #4f97d7;">source</span> ~/.bash_profile &amp;&amp; <span style="color: #4f97d7;">source</span> ~/.bashrc
</pre>
</div>

<p>
<b>注：更详细的情况请参考
<a href="file:///mac/2017/07/26/mac/index.html#安装-pyenv-和-python">Mac 安装使用</a></b>
</p>
</div>
</div>

<div id="outline-container-org9cdb191" class="outline-3">
<h3 id="org9cdb191"><span class="section-number-3">16.2</span> 不使用 pyenv 安装 python</h3>
<div class="outline-text-3" id="text-16-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#20351;&#29992; pyenv &#23433;&#35013; python3</span>
yum search python3
sudo yum install -y python36
sudo ln -sf /usr/bin/python3.6 /usr/bin/python3
sudo ln -sf /usr/bin/python3.6m /usr/bin/python3m
</pre>
</div>
</div>
</div>

<div id="outline-container-org5bb5651" class="outline-3">
<h3 id="org5bb5651"><span class="section-number-3">16.3</span> 安装 python 时报错</h3>
<div class="outline-text-3" id="text-16-3">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#38169;&#35823;&#65306;ModuleNotFoundError: No module named &#8216;_ctypes&#8217;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#35299;&#20915;</span>
sudo yum update
sudo yum upgrade
sudo yum install -y gcc gcc-c++
sudo yum install -y zlib zlib-devel
sudo yum install -y libffi-devel
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb0565d3" class="outline-2">
<h2 id="orgb0565d3"><span class="section-number-2">17</span> 安装 redis</h2>
<div class="outline-text-2" id="text-17">
<p>
安装 redis。
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#30452;&#25509; yum &#23433;&#35013;&#30340; redis &#19981;&#26159;&#26368;&#26032;&#29256;&#26412;</span>
yum install -y redis

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#35201;&#23433;&#35013;&#26368;&#26032;&#30340; redis&#65292;&#38656;&#35201;&#23433;&#35013; Remi &#30340;&#36719;&#20214;&#28304;&#65292;&#23448;&#32593;&#22320;&#22336;&#65306;http://rpms.famillecollet.com/</span>
yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#28982;&#21518;&#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#30340;&#21629;&#20196;&#23433;&#35013;&#26368;&#26032;&#29256;&#26412;&#30340; redis&#65306;</span>
yum --enablerepo=remi install redis

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013;&#23436;&#27605;&#21518;&#65292;&#21363;&#21487;&#20351;&#29992;&#19979;&#38754;&#30340;&#21629;&#20196;&#21551;&#21160; redis &#26381;&#21153;</span>
service redis start
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;</span>
systemctl start redis

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">redis &#23433;&#35013;&#23436;&#27605;&#21518;&#65292;&#25105;&#20204;&#26469;&#26597;&#30475;&#19979; redis &#23433;&#35013;&#26102;&#21019;&#24314;&#30340;&#30456;&#20851;&#25991;&#20214;&#65292;&#22914;&#19979;&#65306;</span>
rpm -qa |grep redis
rpm -ql redis

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475; redis &#29256;&#26412;&#65306;</span>
redis-cli --version

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#20026;&#24320;&#26426;&#33258;&#21160;&#21551;&#21160;&#65306;</span>
chkconfig redis on
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;</span>
systemctl enable redis.service
</pre>
</div>

<p>
Redis 开启远程登录连接，redis 默认只能 localhost
访问，所以需要开启远程登录。 在 redis 的配置文件/etc/redis.conf 中将
<code>bind 127.0.0.1</code> 改成了 =bind 0.0.0.0=，然后要配置防火墙开放端口 6379。
</p>

<p>
连接 redis
</p>

<div class="org-src-container">
<pre class="src src-sh">redis-cli
</pre>
</div>

<p>
在 azure vm centos7.4 安装了最新的 redis 4.0.6 bind 0.0.0.0
发现外网连接不上，发现 azure vm
打开端口的地方已经变了，需要注意：要将源端口设置为 *
，目标端口为我们要打开的 redis 端口，打开后可以使用 telnet
命令测试一下：
</p>

<div class="org-src-container">
<pre class="src src-sh">telnet <span style="color: #a45bad;">101.200.189.125</span> <span style="color: #a45bad;">6379</span>
</pre>
</div>

<p>
另外：redis 3.2 后新增 protected-mode 配置，默认是
yes，即开启。解决方法分为两种：
</p>

<ol class="org-ol">
<li>设置 protected-mode 为 no</li>
<li>配置 bind 或者设置密码</li>
</ol>

<p>
测试的时候使用了配置 bind
方式，没有加密码，正式生产环境可以使用加密码方式。
</p>
</div>
</div>

<div id="outline-container-orgd80b998" class="outline-2">
<h2 id="orgd80b998"><span class="section-number-2">18</span> 安装 vim</h2>
<div class="outline-text-2" id="text-18">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26412;&#22320;</span>
scp -r ~/xhome/dep/vim xuanfour@wozouwokan.com:/home/xuanfour/xhome/dep/vim

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25214;&#21040; vim 8 &#30340; repository&#65292;&#24182;&#19988;&#25918;&#21040;&#26412;&#22320;</span>
<span style="color: #4f97d7;">cd</span> /etc/yum.repos.d/
sudo wget  https://copr.fedorainfracloud.org/coprs/mcepl/vim8/repo/epel-7/mcepl-vim8-epel-7.repo
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475; repo &#25991;&#20214;&#65292;&#22914;&#26524; gpgchek=1 &#26159; enable &#30340;&#65292;&#38656;&#35201;&#23548;&#20837; gpk &#30340;&#35748;&#35777;&#25991;&#20214;</span>
sudo rpm --import  https://copr-be.cloud.fedoraproject.org/results/mcepl/vim8/pubkey.gpg
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26377;&#26102;&#20505; vim-minimal &#26377;&#20914;&#31361;&#65292;&#21368;&#36733;&#20914;&#31361; rpm&#65292;&#37325;&#26032;&#21319;&#32423;&#12290;</span>
sudo yum erase vim-minimal
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#27880;&#24847;&#65281;&#21024;&#38500; vim-minimal &#21487;&#33021;&#20250;&#24433;&#21709; sudo&#65292;&#22312;&#23433;&#35013; vim &#23436;&#25104;&#21518;&#37325;&#26032;&#23433;&#35013; sudo</span>
su -
yum update vim
yum install -y sudo

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#29992; yum &#26597;&#25214;&#28304;&#20013;&#30340; VIM &#21253;&#65292;&#19981;&#30693;&#23433;&#35013;&#21738;&#20010;&#21512;&#36866;&#12290;</span>
yum search vim
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21040;&#24050;&#23433;&#35013; VIM &#30340;&#31995;&#32479;&#20013;&#26597;&#30475; VIM &#23646;&#20110;&#21738;&#20010;&#36719;&#20214;&#21253;&#65306;</span>
<span style="color: #4f97d7;">which</span> vim
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">&gt;&gt; /usr/bin/vim</span>
rpm -qf /usr/bin/vim
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">&gt;&gt; vim-enhanced-7.0.109-7.el5</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; vim</span>
yum install -y vim-enhanced
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36827;&#20837; vim&#65292;&#36816;&#34892; `:BundleClean :BundleInstall :BundleUpdate` &#19977;&#27425;&#25554;&#20214;&#28165;&#29702;&#12289;&#23433;&#35013;&#12289;&#26356;&#26032;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36827;&#20837; vim &#25554;&#20214; LeaderF &#23433;&#35013;&#30446;&#24405;&#65292;&#36816;&#34892; `./install.sh` &#32534;&#35793;&#23433;&#35013;&#26816;&#32034;&#25554;&#20214;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge409e6f" class="outline-2">
<h2 id="orge409e6f"><span class="section-number-2">19</span> 安装 mysql</h2>
<div class="outline-text-2" id="text-19">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Library not loaded &#23433;&#35013;&#21069;&#30475;&#26159;&#21542;&#23433;&#35013;&#36807; mysql&#65292;</span>
yum list installed mysql*
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#26377;&#23601;&#29992; yum remove &#21368;&#36733; mysql</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475; yum &#24211;&#19979;&#26159;&#21542;&#26377; mysql-server</span>
yum list | grep mysql &#25110; yum -y list mysql*
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#27809;&#26377;&#65288;&#19968;&#33324;&#22312; centos7 &#19979;&#27809;&#26377;&#65289;</span>
wget http://repo.mysql.com/mysql80-community-release-el7-1.noarch.rpm
sudo rpm -ivh mysql80-community-release-el7-1.noarch.rpm

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#28982;&#21518;&#23433;&#35013; mysql</span>
sudo yum install -y mysql-server
sudo yum install -y mysql-devel

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#26377; mysql-server&#65292;&#21017;&#25353;&#19979;&#38754;&#27493;&#39588;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; mysql &#23458;&#25143;&#31471;&#65306;</span>
sudo yum install -y mysql
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; mysql &#26381;&#21153;&#22120;&#31471;&#65306;</span>
sudo yum install -y mysql-server
sudo yum install -y mysql-devel

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20462;&#25913;&#37197;&#32622;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">file: /etc/my.cnf</span>
<span style="color: #4f97d7;">[</span>mysqld<span style="color: #4f97d7;">]</span>
character-set-server=utf8

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#28982;&#21518;&#21551;&#21160; mysql &#26381;&#21153;&#65292;&#21487;&#33021;&#38656;&#35201;&#36755;&#20837; root &#23494;&#30721;</span>
service mysqld start
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#30331;&#24405; mysql</span>
mysql -u root -p
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21018;&#23433;&#35013;&#23494;&#30721;&#20026;&#31354;&#65292;&#30452;&#25509;&#25353;&#22238;&#36710;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#25552;&#31034;&#26435;&#38480;&#38169;&#35823;&#65292;&#26159;&#31532;&#19968;&#27425;&#21551;&#21160;&#21518;&#29983;&#25104;&#30340;&#38543;&#26426;&#23494;&#30721;&#65292;&#21487;&#20351;&#29992;&#19979;&#21015;&#21629;&#20196;&#26597;&#30475;</span>
grep <span style="color: #2d9574;">"temporary password"</span> /var/log/mysqld.log

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#25968;&#25454;&#24211;&#65306;</span>
show databases;
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#25552;&#31034;&#38169;&#35823;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">===&gt; ERROR 1820 (HY000): You must reset your password</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">===&gt; using ALTER USER statement before executing this statement.</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#20004;&#31181;&#26041;&#24335;&#20462;&#25913;&#23494;&#30721;&#65306;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">1.</span>
SET <span style="color: #7590db;">PASSWORD</span> = PASSWORD<span style="color: #4f97d7;">(</span>&#8216;<span style="color: #a45bad;">12345678</span>&#8217;<span style="color: #4f97d7;">)</span>;
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">2.</span>
ALTER USER USER<span style="color: #4f97d7;">()</span> IDENTIFIED BY &#8216;<span style="color: #a45bad;">12345678</span>&#8217;;
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">===&gt; ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20986;&#29616;&#36825;&#20010;&#38169;&#20854;&#23454;&#26159;&#21644; validate_password_policy &#30340;&#20540;&#26377;&#20851;&#12290;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">MySQL &#23436;&#25972;&#30340;&#21021;&#22987;&#23494;&#30721;&#35268;&#21017;&#21487;&#20197;&#36890;&#36807;&#22914;&#19979;&#21629;&#20196;&#26597;&#30475;&#65306;</span>
use sys;
SHOW VARIABLES LIKE <span style="color: #2d9574;">'validate_password%'</span>;
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">validate_password_policy &#40664;&#35748;&#26159; 1&#65292;&#21363; MEDIUM&#65292;&#25152;&#20197;&#21018;&#24320;&#22987;&#35774;&#32622;&#30340;&#23494;&#30721;&#24517;&#39035;&#31526;&#21512;&#38271;&#24230;&#65292;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#19988;&#24517;&#39035;&#21547;&#26377;&#25968;&#23383;&#65292;&#23567;&#20889;&#25110;&#22823;&#20889;&#23383;&#27597;&#65292;&#29305;&#27530;&#23383;&#31526;&#12290;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26377;&#26102;&#20505;&#65292;&#21482;&#26159;&#20026;&#20102;&#33258;&#24049;&#27979;&#35797;&#65292;&#19981;&#24819;&#23494;&#30721;&#35774;&#32622;&#24471;&#37027;&#20040;&#22797;&#26434;&#65292;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#35692;&#22914;&#35828;&#65292;&#25105;&#21482;&#24819;&#35774;&#32622; root &#30340;&#23494;&#30721;&#20026; 123456&#12290;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#24517;&#39035;&#20462;&#25913;&#20004;&#20010;&#20840;&#23616;&#21442;&#25968;&#65306;</span>
<span style="color: #4f97d7;">set</span> global <span style="color: #7590db;">validate_password_policy</span>=<span style="color: #a45bad;">0</span>;
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36825;&#26679;&#65292;&#21028;&#26029;&#23494;&#30721;&#30340;&#26631;&#20934;&#23601;&#22522;&#20110;&#23494;&#30721;&#30340;&#38271;&#24230;&#20102;&#12290;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36825;&#20010;&#30001; validate_password_length &#21442;&#25968;&#26469;&#20915;&#23450;&#12290;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23494;&#30721;&#30340;&#38271;&#24230;&#26159;&#30001; validate_password_length &#20915;&#23450;&#30340;&#65292;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#32780; validate_password_length &#30340;&#35745;&#31639;&#20844;&#24335;&#26159;&#65306;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">validate_password_length = validate_password_number_count +</span>
<span style="color: #2aa1ae; background-color: #292e34;">#     </span><span style="color: #2aa1ae; background-color: #292e34;">validate_password_special_char_count +</span>
<span style="color: #2aa1ae; background-color: #292e34;">#     </span><span style="color: #2aa1ae; background-color: #292e34;">(2 * validate_password_mixed_case_count)</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">validate_password_number_count &#25351;&#23450;&#20102;&#23494;&#30721;&#20013;&#25968;&#25454;&#30340;&#38271;&#24230;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">validate_password_special_char_count &#25351;&#23450;&#20102;&#23494;&#30721;&#20013;&#29305;&#27530;&#23383;&#31526;&#30340;&#38271;&#24230;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">validate_password_mixed_case_count &#25351;&#23450;&#20102;&#23494;&#30721;&#20013;&#22823;&#23567;&#23383;&#27597;&#30340;&#38271;&#24230;&#12290;</span>
<span style="color: #4f97d7;">set</span> global <span style="color: #7590db;">validate_password_length</span>=<span style="color: #a45bad;">1</span>;
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36825;&#20123;&#21442;&#25968;&#65292;&#40664;&#35748;&#20540;&#22343;&#20026; 1&#65292;&#25152;&#20197; validate_password_length &#26368;&#23567;&#20540;&#20026; 4&#65292;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22914;&#26524;&#20320;&#26174;&#24615;&#25351;&#23450; validate_password_length &#30340;&#20540;&#23567;&#20110; 4&#65292;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23613;&#31649;&#19981;&#20250;&#25253;&#38169;&#65292;&#20294; validate_password_length &#30340;&#20540;&#23558;&#35774;&#20026; 4&#12290;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21047;&#26032;&#31995;&#32479;&#24182;&#20351;&#29992;&#26032;&#23494;&#30721;&#27979;&#35797;&#30331;&#24405;</span>
flush privileges;
mysql -u root -p
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22240;&#20026;&#23433;&#35013;&#20102; Yum Repository&#65292;&#20197;&#21518;&#27599;&#27425; yum &#25805;&#20316;&#37117;&#20250;&#33258;&#21160;&#26356;&#26032;&#65292;&#21487;&#20197;&#21368;&#36733;&#65306;</span>
sudo yum -y remove mysql80-community-release-el7-1.noarch.rpm
</pre>
</div>
</div>
</div>

<div id="outline-container-org3dd1de5" class="outline-2">
<h2 id="org3dd1de5"><span class="section-number-2">20</span> 检查磁盘空间</h2>
<div class="outline-text-2" id="text-20">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#25152;&#26377;&#23384;&#20648;&#31995;&#32479;&#31354;&#38388;&#20351;&#29992;&#24773;&#20917;,&#21516;&#26102;&#26174;&#31034;&#23384;&#20648;&#31995;&#32479;&#30340;&#25991;&#20214;&#31995;&#32479;&#31867;&#22411;</span>
df -aT
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#25351;&#23450;&#25991;&#20214;&#31995;&#32479;&#30340;&#31354;&#38388;&#20351;&#29992;&#24773;&#20917;</span>
df -t ext3
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20154;&#24615;&#21270;&#26174;&#31034;&#21508;&#23384;&#20648;&#31354;&#38388;&#22823;&#23567;</span>
df -ah
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26377;&#26102;&#20505;&#25346;&#36733;&#20102;&#32593;&#32476;&#25991;&#20214;&#31995;&#32479;&#65292;&#33509;&#21482;&#24819;&#30475;&#26412;&#26426;&#30340;&#25991;&#20214;&#31995;&#32479;&#29992;&#22914;&#19979;&#21629;&#20196;</span>
df -ahlT
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#26576;&#20010;&#25991;&#20214;&#31995;&#32479;&#30340;&#30913;&#30424;&#20351;&#29992;&#24773;&#20917;</span>
df -h /dev/cdrom
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8c1f41" class="outline-2">
<h2 id="orge8c1f41"><span class="section-number-2">21</span> 检查目录空间</h2>
<div class="outline-text-2" id="text-21">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#24403;&#21069;&#25991;&#20214;&#22841;&#22823;&#23567;</span>
du -sh
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#24403;&#21069;&#25991;&#20214;&#21450;&#25991;&#20214;&#20013;&#21253;&#21547;&#30340;&#23376;&#25991;&#20214;&#22841;&#22823;&#23567;</span>
du -ch
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#25991;&#20214;&#30340;&#22823;&#23567;</span>
du -h test1.txt
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21516;&#26102;&#26597;&#30475;&#22810;&#20010;&#25991;&#20214;&#30340;&#22823;&#23567;</span>
du -h test1.txt test2.txt
</pre>
</div>
</div>
</div>

<div id="outline-container-orga75f69d" class="outline-2">
<h2 id="orga75f69d"><span class="section-number-2">22</span> References</h2>
</div>
